<AppHeader @title="Create Course" @showBack={{true}} />

<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-body">

      <div class="mb-3">
        <label class="form-label">Course Name</label>
        {{input class="form-control" value=this.course.name}}
      </div>

      <div class="mb-3">
        <label class="form-label">Description</label>
        {{textarea class="form-control" rows="3" value=this.course.description}}
      </div>

      <h5 class="mt-4">Contents</h5>

      {{#each this.course.contents as |content index|}}
        <div class="border rounded p-3 mb-3">
          {{input class="form-control mb-2" placeholder="Title" value=content.title}}
          {{textarea class="form-control mb-2" placeholder="Description" value=content.description}}
          {{input class="form-control mb-2" placeholder="Video URL" value=content.videoUrl}}

          <button class="btn btn-sm btn-danger" {{action "removeContent" index}}>
            Remove
          </button>
        </div>
      {{/each}}

      <button class="btn btn-outline-primary mb-4" {{action "addContent"}}>
        + Add Content
      </button>

      <h5>Students</h5>
      {{input class="form-control mb-2" placeholder="Search students" value=this.memberSearch}}

      <table class="table table-bordered table-sm">
        <tbody>
          {{#each this.filteredMembers as |u|}}
            <tr>
              <td>{{u.name}}</td>
              <td>{{u.registerNumber}}</td>
              <td>
                <button class="btn btn-sm btn-success" {{action "addMember" u}}>Add</button>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <h6 class="mt-3">Selected Students</h6>
      <table class="table table-bordered table-sm">
        <tbody>
          {{#each this.selectedMembers as |u|}}
            <tr>
              <td>{{u.name}}</td>
              <td>{{u.registerNumber}}</td>
              <td>
                <button class="btn btn-sm btn-danger" {{action "removeMember" u}}>Remove</button>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <h5 class="mt-4">Admins</h5>
      {{input class="form-control mb-2" placeholder="Search admins" value=this.adminSearch}}

      <table class="table table-bordered table-sm">
        <tbody>
          {{#each this.filteredAdmins as |u|}}
            <tr>
              <td>{{u.name}}</td>
              <td>{{u.registerNumber}}</td>
              <td>
                <button class="btn btn-sm btn-success" {{action "addAdmin" u}}>Add</button>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <h6 class="mt-3">Selected Admins</h6>
      <table class="table table-bordered table-sm">
        <tbody>
          {{#each this.selectedAdmins as |u|}}
            <tr>
              <td>{{u.name}}</td>
              <td>{{u.registerNumber}}</td>
              <td>
                <button class="btn btn-sm btn-danger" {{action "removeAdmin" u}}>Remove</button>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <button class="btn btn-success mt-4 w-100" {{action "createCourse"}}>
        Create Course
      </button>

    </div>
  </div>
</div>
